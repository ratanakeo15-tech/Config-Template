<div class="max-w-4xl mx-auto space-y-6">
  <!-- Profile Header -->
  <mat-card class="p-6">
    <div
      class="flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-6"
    >
      <div class="relative">
        @if (authService.user()?.avatar) {
        <img
          [src]="authService.user()?.avatar"
          [alt]="authService.user()?.firstName"
          class="w-24 h-24 rounded-full object-cover border-4 border-blue-100"
        />
        } @else {
        <div
          class="w-24 h-24 bg-blue-500 rounded-full flex items-center justify-center"
        >
          <mat-icon class="text-white text-4xl">person</mat-icon>
        </div>
        }
        <button
          mat-mini-fab
          color="primary"
          class="absolute -bottom-2 -right-2"
          (click)="triggerFileInput()"
        >
          <mat-icon>edit</mat-icon>
        </button>
        <input
          #fileInput
          type="file"
          accept="image/*"
          class="hidden"
          (change)="onAvatarChange($event)"
        />
      </div>

      <div class="text-center md:text-left flex-1">
        <h1 class="text-3xl font-bold text-gray-900">
          {{ authService.user()?.firstName }} {{ authService.user()?.lastName }}
        </h1>
        <p class="text-gray-600 text-lg">{{ authService.user()?.email }}</p>
        <div class="flex flex-wrap gap-2 mt-3 justify-center md:justify-start">
          <span
            class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"
          >
            Active
          </span>
          <span
            class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium"
          >
            Premium User
          </span>
        </div>
      </div>
    </div>
  </mat-card>

  <!-- Profile Tabs -->
  <mat-card class="p-6">
    <mat-tab-group>
      <!-- Personal Information Tab -->
      <mat-tab label="Personal Information">
        <div class="py-6">
          <form
            [formGroup]="profileForm"
            (ngSubmit)="updateProfile()"
            class="space-y-4"
          >
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <mat-form-field appearance="outline" class="w-full">
                <mat-label>First Name</mat-label>
                <input matInput type="text" formControlName="firstName" />
                @if (profileForm.get('firstName')?.invalid &&
                profileForm.get('firstName')?.touched) {
                <mat-error>First name is required</mat-error>
                }
              </mat-form-field>

              <mat-form-field appearance="outline" class="w-full">
                <mat-label>Last Name</mat-label>
                <input matInput type="text" formControlName="lastName" />
                @if (profileForm.get('lastName')?.invalid &&
                profileForm.get('lastName')?.touched) {
                <mat-error>Last name is required</mat-error>
                }
              </mat-form-field>
            </div>

            <mat-form-field appearance="outline" class="w-full">
              <mat-label>Email</mat-label>
              <input matInput type="email" formControlName="email" />
              <mat-icon matSuffix>email</mat-icon>
              @if (profileForm.get('email')?.invalid &&
              profileForm.get('email')?.touched) {
              <mat-error>Please enter a valid email</mat-error>
              }
            </mat-form-field>

            <div class="flex justify-end space-x-3">
              <button mat-button type="button" (click)="resetForm()">
                Reset
              </button>
              <button
                mat-raised-button
                color="primary"
                type="submit"
                [disabled]="profileForm.invalid || isUpdating()"
              >
                @if (isUpdating()) { Updating... } @else { Update Profile }
              </button>
            </div>
          </form>
        </div>
      </mat-tab>

      <!-- Account Settings Tab -->
      <mat-tab label="Account Settings">
        <div class="py-6 space-y-6">
          <!-- Account Stats -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-blue-50 rounded-lg p-4 text-center">
              <mat-icon class="text-blue-600 text-4xl mb-2">today</mat-icon>
              <p class="text-sm text-gray-600">Member Since</p>
              <p class="text-lg font-semibold text-gray-900">Jan 2024</p>
            </div>
            <div class="bg-green-50 rounded-lg p-4 text-center">
              <mat-icon class="text-green-600 text-4xl mb-2">login</mat-icon>
              <p class="text-sm text-gray-600">Last Login</p>
              <p class="text-lg font-semibold text-gray-900">Today</p>
            </div>
            <div class="bg-purple-50 rounded-lg p-4 text-center">
              <mat-icon class="text-purple-600 text-4xl mb-2"
                >security</mat-icon
              >
              <p class="text-sm text-gray-600">Security Score</p>
              <p class="text-lg font-semibold text-gray-900">98%</p>
            </div>
          </div>

          <mat-divider></mat-divider>

          <!-- Security Settings -->
          <div class="space-y-4">
            <h3 class="text-lg font-semibold text-gray-900">
              Security Settings
            </h3>

            <div class="space-y-3">
              <div
                class="flex items-center justify-between p-4 bg-gray-50 rounded-lg"
              >
                <div class="flex items-center space-x-3">
                  <mat-icon class="text-gray-600">lock</mat-icon>
                  <div>
                    <p class="font-medium text-gray-900">Change Password</p>
                    <p class="text-sm text-gray-600">
                      Update your account password
                    </p>
                  </div>
                </div>
                <button mat-button color="primary">Change</button>
              </div>

              <div
                class="flex items-center justify-between p-4 bg-gray-50 rounded-lg"
              >
                <div class="flex items-center space-x-3">
                  <mat-icon class="text-gray-600">smartphone</mat-icon>
                  <div>
                    <p class="font-medium text-gray-900">
                      Two-Factor Authentication
                    </p>
                    <p class="text-sm text-gray-600">
                      Add an extra layer of security
                    </p>
                  </div>
                </div>
                <button mat-button color="primary">Enable</button>
              </div>

              <div
                class="flex items-center justify-between p-4 bg-gray-50 rounded-lg"
              >
                <div class="flex items-center space-x-3">
                  <mat-icon class="text-gray-600">history</mat-icon>
                  <div>
                    <p class="font-medium text-gray-900">Login History</p>
                    <p class="text-sm text-gray-600">
                      View recent login activity
                    </p>
                  </div>
                </div>
                <button mat-button color="primary">View</button>
              </div>
            </div>
          </div>

          <mat-divider></mat-divider>

          <!-- Danger Zone -->
          <div class="space-y-4">
            <h3 class="text-lg font-semibold text-red-600">Danger Zone</h3>
            <div class="border border-red-200 rounded-lg p-4 bg-red-50">
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-medium text-red-900">Delete Account</p>
                  <p class="text-sm text-red-700">
                    Permanently delete your account and all data
                  </p>
                </div>
                <button mat-button color="warn">Delete</button>
              </div>
            </div>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </mat-card>
  <button
  (click)="logout()"
    matButton="elevated"
    disabled
    disabledInteractive
    matTooltip="This is a tooltip!"
    class="w-full bg-green-200 !bg-green-800 !text-white !cursor-pointer"
  >
    Log Out
  </button>
</div>
