<!-- <div class="p-4">
  <mat-form-field appearance="outline" class="w-64 mb-4">
    <mat-label>Select Category</mat-label>
    <mat-select (selectionChange)="onCategoryChange($event.value)">
      <mat-option>All Product</mat-option>
      @for( p of relatedProducts$ | async;track p.id){
      <mat-option [value]="p.id">
        {{ p.category }}
      </mat-option>
      }
    </mat-select>
  </mat-form-field>

  @if(loading$ | async){
  <div class="flex justify-center my-4">
    <mat-spinner diameter="40"></mat-spinner>
  </div>
  } @if(selectedProduct$ | async; as product){

  <h1 class="text-[30px]">
    <button (click)="backClick()" class="underline text-blue-700">/Back</button>
  </h1>
  <mat-card class="mb-6 mt-[50px]">
    <mat-card-header>
      <mat-card-title>{{ product.title }}</mat-card-title>
      <mat-card-subtitle>Category: {{ product.category }}</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <p>{{ product.description }}</p>
      <p><strong>Price:</strong> ${{ product.price }}</p>
    </mat-card-content>
  </mat-card>
  } @else {

  <h3 class="mb-2">Related Products</h3>
  <div class="grid grid-cols-3 gap-4">
    @for( p of relatedProducts$ | async;track p.id){
    <mat-card
      (click)="viewProduct(p.id)"
      class="cursor-pointer hover:shadow-lg"
    >
      <mat-card-header>
        <mat-card-title>{{ p.title }}</mat-card-title>
        <mat-card-subtitle>${{ p.price }}</mat-card-subtitle>
        <mat-card-subtitle>{{ p.category }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p>{{ p.description }}</p>
      </mat-card-content>
    </mat-card>
    }
  </div>
  }
</div> -->

@if((selectedProduct$ | async) === null){
  <app-product-list
  [products]="products$ | async"
  [relatedProducts]="relatedProducts$ | async"
  (selectProduct)="onSelectProduct($event)">
</app-product-list>
}
@if(selectedProduct$ | async; as product){
  <app-product-detail
 
  [product]="product"
  (back)="onBack()">
</app-product-detail>
}



